"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[762],{6306:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var n=r(8168),o=r(8587),a=(r(6540),r(5680)),i=["components"],s={id:"provider",title:"Provider",sidebar_label:"Provider",hide_title:!0,description:"API > Provider: providing the Redux store to your React app"},p=void 0,c={unversionedId:"api/provider",id:"api/provider",title:"Provider",description:"API > Provider: providing the Redux store to your React app",source:"@site/../docs/api/Provider.md",sourceDirName:"api",slug:"/api/provider",permalink:"/api/provider",draft:!1,editUrl:"https://github.com/reduxjs/react-redux/edit/master/website/../docs/api/Provider.md",tags:[],version:"current",lastUpdatedAt:1737620528,formattedLastUpdatedAt:"Jan 23, 2025",frontMatter:{id:"provider",title:"Provider",sidebar_label:"Provider",hide_title:!0,description:"API > Provider: providing the Redux store to your React app"},sidebar:"docs",previous:{title:"Accessing the Store",permalink:"/using-react-redux/accessing-store"},next:{title:"Hooks",permalink:"/api/hooks"}},l={},d=[{value:"Overview",id:"overview",level:2},{value:"Props",id:"props",level:3},{value:"React 18 SSR Usage",id:"react-18-ssr-usage",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"React 18 SSR Hydration",id:"react-18-ssr-hydration",level:3}],u={toc:d},y="wrapper";function m(e){var t=e.components,r=(0,o.A)(e,i);return(0,a.yg)(y,(0,n.A)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"provider"},(0,a.yg)("inlineCode",{parentName:"h1"},"Provider")),(0,a.yg)("h2",{id:"overview"},"Overview"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>")," component makes the Redux ",(0,a.yg)("inlineCode",{parentName:"p"},"store")," available to any nested components that need to access the Redux store."),(0,a.yg)("p",null,"Since any React component in a React Redux app can be connected to the store, most applications will render a ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>")," at the top level, with the entire app\u2019s component tree inside of it."),(0,a.yg)("p",null,"The ",(0,a.yg)("a",{parentName:"p",href:"/api/hooks"},"Hooks")," and ",(0,a.yg)("a",{parentName:"p",href:"/api/connect"},(0,a.yg)("inlineCode",{parentName:"a"},"connect"))," APIs can then access the provided store instance via React's Context mechanism."),(0,a.yg)("h3",{id:"props"},"Props"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-ts"},"interface ProviderProps<A extends Action = AnyAction, S = any> {\n  /**\n   * The single Redux store in your application.\n   */\n  store: Store<S, A>\n\n  /**\n   * An optional server state snapshot. Will be used during initial hydration render\n   * if available, to ensure that the UI output is consistent with the HTML generated on the server.\n   * New in 8.0\n   */\n  serverState?: S\n\n  /**\n   * Optional context to be used internally in react-redux. Use React.createContext()\n   * to create a context to be used.\n   * If this is used, you'll need to customize `connect` by supplying the same\n   * context provided to the Provider.\n   * Set the initial value to null, and the hooks will error\n   * if this is not overwritten by Provider.\n   */\n  context?: Context<ReactReduxContextValue<S, A> | null>\n\n  /** Global configuration for the `useSelector` stability check */\n  stabilityCheck?: StabilityCheck\n\n  /** The top-level React elements in your component tree, such as `<App />` **/\n  children: ReactNode\n}\n")),(0,a.yg)("p",null,"Typically, you only need to pass ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider store={store}>"),"."),(0,a.yg)("p",null,"You may provide a context instance. If you do so, you will need to provide the same context instance to all of your connected components as well. Failure to provide the correct context results in this runtime error:"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Invariant Violation"),(0,a.yg)("p",{parentName:"blockquote"},'Could not find "store" in the context of "Connect(MyComponent)". Either wrap the root component in a ',(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>"),", or pass a custom React context provider to ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>")," and the corresponding React context consumer to Connect(Todo) in connect options.")),(0,a.yg)("h2",{id:"react-18-ssr-usage"},"React 18 SSR Usage"),(0,a.yg)("p",null,"As of React-Redux v8, ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>")," now accepts a ",(0,a.yg)("inlineCode",{parentName:"p"},"serverState")," prop for use in SSR hydration scenarios. This is necessary if you are calling ",(0,a.yg)("inlineCode",{parentName:"p"},"hydrateRoot")," in order to avoid hydration mismatches."),(0,a.yg)("p",null,"You should pass the entire serialized state from the server as the ",(0,a.yg)("inlineCode",{parentName:"p"},"serverState")," prop, and React will use this state for the initial hydration render. After that, it will apply any updates from changes that occurred on the client during the setup process."),(0,a.yg)("h2",{id:"examples"},"Examples"),(0,a.yg)("h3",{id:"basic-usage"},"Basic Usage"),(0,a.yg)("p",null,"In the example below, the ",(0,a.yg)("inlineCode",{parentName:"p"},"<App />")," component is our root-level component. This means it\u2019s at the very top of our component hierarchy."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n\nimport { App } from './App'\nimport createStore from './createReduxStore'\n\nconst store = createStore()\n\n// As of React 18\nconst root = ReactDOM.createRoot(document.getElementById('root'))\nroot.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n)\n")),(0,a.yg)("h3",{id:"react-18-ssr-hydration"},"React 18 SSR Hydration"),(0,a.yg)("p",null,"In this example, the client has received HTML rendered by the server, as well as a serialized Redux state attached to ",(0,a.yg)("inlineCode",{parentName:"p"},"window"),". The serialized state is used to both pre-fill the store's contents, ",(0,a.yg)("em",{parentName:"p"},"and")," passed as the ",(0,a.yg)("inlineCode",{parentName:"p"},"serverState")," prop to ",(0,a.yg)("inlineCode",{parentName:"p"},"<Provider>")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/index.ts"',title:'"src/index.ts"'},"import { hydrateRoot } from 'react-dom/client'\nimport { configureStore } from '@reduxjs/toolkit'\nimport { Provider } from 'react-redux'\n\nconst preloadedState = window.__PRELOADED_STATE__\n\nconst clientStore = configureStore({\n  reducer: rootReducer,\n  preloadedState,\n})\n\nhydrateRoot(\n  document.getElementById('root'),\n  <Provider store={clientStore} serverState={preloadedState}>\n    <App />\n  </Provider>,\n)\n")))}m.isMDXComponent=!0},5680:(e,t,r)=>{r.d(t,{xA:()=>l,yg:()=>m});var n=r(6540);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),c=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(r),y=o,m=d["".concat(p,".").concat(y)]||d[y]||u[y]||a;return r?n.createElement(m,i(i({ref:t},l),{},{components:r})):n.createElement(m,i({ref:t},l))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=y;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}y.displayName="MDXCreateElement"}}]);